<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Aula 01 - Direito Penal com Login Google</title>
  <style>
    body { margin:0; background:#111; }
    #yt-container {
      width:100vw; height:100vh; 
      display:flex; align-items:center; justify-content:center;
      flex-direction:column;
    }
    #signin-btn {
      padding:10px 20px; 
      background:#4285F4; 
      color:white; 
      cursor:pointer; 
      border-radius:5px;
      font-family:sans-serif;
      display:none;
    }
  </style>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

<div id="yt-container">
  <div id="signin-btn">Faça login com o Google para assistir</div>
</div>

<script>
  const CLIENT_ID = "492439138318-is1f8gfhid22rpp54qacplvfnhkr60eg.apps.googleusercontent.com";

  function createIframe() {
    // Base64 do ID do vídeo: nh3mKviPtZw => bmgzbUt2aVB0Wnc=
    const encodedID = 'bmgzbUt2aVB0Wnc=';
    const videoID = atob(encodedID);

    const iframe = document.createElement('iframe');
    iframe.width = "800";
    iframe.height = "450";
    iframe.src = 'https://www.youtube.com/embed/' + videoID + '?rel=0&modestbranding=1&controls=0&showinfo=0';
    iframe.frameBorder = "0";
    iframe.allowFullscreen = true;
    iframe.allow = "accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture";

    const container = document.getElementById('yt-container');
    container.innerHTML = '';
    container.appendChild(iframe);
  }

  function handleCredentialResponse(response) {
    // Usuário está logado
    console.log("Logado com sucesso:", response);
    createIframe();
  }

  window.onload = function () {
    google.accounts.id.initialize({
      client_id: CLIENT_ID,
      callback: handleCredentialResponse
    });

    google.accounts.id.prompt((notification) => {
      if(notification.isNotDisplayed()){
        document.getElementById('signin-btn').style.display = 'block';
      }
    });

    document.getElementById('signin-btn').onclick = () => {
      google.accounts.id.prompt(); 
    };
  };
</script>

</body>
</html>
